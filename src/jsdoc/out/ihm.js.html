<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="utf-8">
    <title>JSDoc: Source: ihm.js</title>

    <script src="scripts/prettify/prettify.js"> </script>
    <script src="scripts/prettify/lang-css.js"> </script>
    <!--[if lt IE 9]>
      <script src="//html5shiv.googlecode.com/svn/trunk/html5.js"></script>
    <![endif]-->
    <link type="text/css" rel="stylesheet" href="styles/prettify-tomorrow.css">
    <link type="text/css" rel="stylesheet" href="styles/jsdoc-default.css">
</head>

<body>

<div id="main">

    <h1 class="page-title">Source: ihm.js</h1>

    



    
    <section>
        <article>
            <pre class="prettyprint source linenums"><code>/**
  *@module ihm
  *@version 1.0
  *@date 24/04/2018
  *@author Axel Murat &amp; Alexandre Mailliu
*/

/**Function to add a plank in the plank select*/

function addPlank(){

  var name = document.getElementById('pName').value;
  var lenght = Number(document.getElementById("pLenght").value);
  var width = Number(document.getElementById("pWidth").value);
  var thick = Number(document.getElementById("pThick").value);
  var planche = new Planche(name,lenght,width,thick);

  selectPlanche.push(planche);
  removeOptions(document.getElementById("selectP"));
  updateSelectPlank(selectPlanche);
}
        /** Function to remove all element in the select
         * @param {HTMLElement} selectbox - The select that we want to remove all element
         */
         function removeOptions(selectbox)
         {
          var i;
          for(i = selectbox.options.length - 1 ; i >= 0 ; i--)
          {
            selectbox.remove(i);
          }
        }
        /** Function to add an option in the select
          *@param {HTMLElement} selectbox - The select that we want to add an element
          *@param {String} element - The String of the plank
          */
        function addOption(selectBox,element){
            var option = document.createElement("option");
            option.text = element;
            selectBox.add(option);
        }

        /** Function that's update the select with the data of the plank array
          * @param {Planche[]}
          */
          function updateSelectPlank(array){
            select = document.getElementById("selectP");
            removeOptions(document.getElementById("selectP"));
            var i = 0;
            for(i = select.options.lenght - 1; i >=0; i--){
              console.log("�a remove");
              selectBox.remove(i);
            }
            for(i = 0;i&lt;array.length;i++){
              addOption(select,array[i].name+"("+array[i].width+"x"+array[i].length+"x"+array[i].thickness+"mm)");
              select.options[i].setAttribute("id",array[i].id);
            }
          }
        /**
          *Represent a plank
          *@constructor
          *@param {string} name - Name or id of the plank
          *@param {integer} witdh - Witdh of the plank
          *@param {integer} length - Length of the plank
          *@param {integer} thickness - Thickness of the plankId
          */
          var Planche = (function(){
            /** @member{integer} NextId - value for the next plank Id */
            var nextId = 1;
            return function Planche(name,width,height,thickness){
              this.name = name;
              this.width = width;
              this.length  = length;
              this.thickness = thickness;
              this.id = nextId++;
            }
            
          })();

          var planche1 = new Planche("planche1",120,70,1);
          var planche2 = new Planche("planche2",120,70,3);
          /** Store the selected index in the plank select*/
          var indexSelection = 0;
          /** Array of planks */
          var selectPlanche = [];
          selectPlanche = [];
          selectPlanche.push(planche1);
          selectPlanche.push(planche2);
          updateSelectPlank(selectPlanche);

          document.getElementById("genButton").disabled = true;
          document.getElementById("pButton").disabled = true;


      /*
       *Function to load the values in the form after uploading an user model
       */
       function fileChangeEvent(){
        var files = document.getElementById('fileid').files;
        console.log(files);
        if (files.length &lt;= 0) {
          return false;
        }

        var fr = new FileReader();

        fr.onload = function(e) { 
          console.log(e);
          var result = JSON.parse(e.target.result);
          selectPlanche = result.planches;
          document.getElementById("longueur").value = result.length;
          document.getElementById("largeur").value = result.width;
          document.getElementById("hauteur").value = result.height;
          document.getElementById("encoche").value = result.notch;
          document.getElementById("formCheck-1").checked = result.close;
          document.getElementById("selectP").selectedIndex = result.selectedIndex;
          updateSelectPlank(selectPlanche);
          checkValue();

        }

        fr.readAsText(files.item(0));
      }


      /*
       * Function that's check if the data is num�ric
       * @param Value - The value we want to check
       * @return {Boolean} Return True or False
       */
       function isNumeric(a) {
        var b = a &amp;&amp; a.toString();
        return !$.isArray(a) &amp;&amp; b - parseFloat(b) + 1 >= 0;
      };

    /*
     *Function to save the user Model in JSON format and download the file
     */
     function saveModelJson(){
      var jsonObj = new Object();
      jsonObj.planches = selectPlanche;
      jsonObj.length = document.getElementById("longueur").value;
      jsonObj.width = document.getElementById("largeur").value;
      jsonObj.height = document.getElementById("hauteur").value;
      jsonObj.notch = document.getElementById("encoche").value;
      jsonObj.close = document.getElementById("formCheck-1").checked;
      jsonObj.selectedIndex = indexSelection;

      var myJSON = JSON.stringify(jsonObj); 
      var encodedData = "data:image/txt;base64," + window.btoa(myJSON);
      document.getElementById("json").setAttribute("href", encodedData);
      document.getElementById("json").setAttribute("download", "model.json");
      document.getElementById("json").click();

    }

    /*
     *Function that's check the values within the form of the modal and allow or not the user to click on the button to add plank in the select
     */
     function checkValueModal(){
      var name = document.getElementById('pName').value;
      var length = Number(document.getElementById("pLenght").value);
      var width = Number(document.getElementById("pWidth").value);
      var thick = Number(document.getElementById("pThick").value);
      var valid = isNumeric(length) &amp;&amp; isNumeric(width) &amp;&amp; isNumeric(thick) &amp;&amp; name &amp;&amp; length > 0 &amp;&amp; width > 0 &amp;&amp; thick >0;
      document.getElementById("pButton").disabled = !valid;

    }
    /*
     * Function that's check the values within the form of the box and allow or not the user to click on the button to generate a svg 
     */
     function checkValue(){
      var length = document.getElementById("longueur").value;
      var witdh = document.getElementById("largeur").value;
      var height = document.getElementById("hauteur").value;
      var notch = document.getElementById("encoche").value;
      var valid = isNumeric(length) &amp;&amp; isNumeric(witdh) &amp;&amp; isNumeric(height) &amp;&amp; isNumeric(notch) &amp;&amp; length > 0 &amp;&amp; witdh > 0 &amp;&amp; height > 0 &amp;&amp; notch > 0;
      document.getElementById("genButton").disabled = !valid;
    }
    /*
     * Function to set the var IndexSelection to the selected index of the plank select
     */
     function getSelectedPlankIndex(){
      var select = document.getElementById('selectP');
      selectedOption = select.options[select.selectedIndex];
      var plankId = Number(selectedOption.getAttribute("id"));
      var i = 0;
      for(i=0;i&lt;selectPlanche.length;i++){
        if(selectPlanche[i].id == plankId){
          indexSelection = i;
        }
      }
    }
    //checkValue();</code></pre>
        </article>
    </section>




</div>

<nav>
    <h2><a href="index.html">Home</a></h2><h3>Modules</h3><ul><li><a href="module-generate_svg_boxes.html">generate_svg_boxes</a></li><li><a href="module-ihm.html">ihm</a></li></ul><h3>Classes</h3><ul><li><a href="module-generate_svg_boxes-Box_with_top.html">Box_with_top</a></li><li><a href="module-generate_svg_boxes-Box_without_top.html">Box_without_top</a></li><li><a href="module-ihm-Planche.html">Planche</a></li></ul>
</nav>

<br class="clear">

<footer>
    Documentation generated by <a href="https://github.com/jsdoc3/jsdoc">JSDoc 3.5.5</a> on Tue Apr 24 2018 14:03:34 GMT+0200 (Paris, Madrid (heure d’été))
</footer>

<script> prettyPrint(); </script>
<script src="scripts/linenumber.js"> </script>
</body>
</html>

<!doctype html>
<html lang="fr">

<head>
	<meta charset="UTF-8">
	<script type="text/javascript" src="generate_svg_boxes.js"></script>
</head>

<body>
	<a id="filesvg" >
	</a>
		<?xml version="1.0" encoding="UTF-8" standalone="no"?>
			<svg
			   xmlns:osb="http://www.openswatchbook.org/uri/2009/osb"
			   xmlns:dc="http://purl.org/dc/elements/1.1/"
			   xmlns:cc="http://creativecommons.org/ns#"
			   xmlns:rdf="http://www.w3.org/1999/02/22-rdf-syntax-ns#"
			   xmlns:svg="http://www.w3.org/2000/svg"
			   xmlns="http://www.w3.org/2000/svg"
			   xmlns:sodipodi="http://sodipodi.sourceforge.net/DTD/sodipodi-0.dtd"
			   xmlns:inkscape="http://www.inkscape.org/namespaces/inkscape"
			   width="600"
			   height="300"
			   version="1.1"
			   id="svg"
			   inkscape:version="0.92.3 (2405546, 2018-03-11)"
			   sodipodi:docname="inkscape1test.svg"
			   stroke="#ff0000" fill="#ffffff" fill-opacity="0">
			  <defs
				 id="defs3727">
				<linearGradient
				   inkscape:collect="always"
				   id="linearGradient4578"
				   osb:paint="gradient">
				  <stop
					 style="stop-color:#000000;stop-opacity:1;"
					 offset="0"
					 id="stop4574" />
				  <stop
					 style="stop-color:#000000;stop-opacity:0;"
					 offset="1"
					 id="stop4576" />
				</linearGradient>
			  </defs>
			  <sodipodi:namedview
				 id="base"
				 pagecolor="#ffffff"
				 bordercolor="#666666"
				 borderopacity="1.0"
				 inkscape:pageopacity="0.0"
				 inkscape:pageshadow="2"
				 inkscape:zoom="0.7"
				 inkscape:cx="280.75598"
				 inkscape:cy="674.9179"
				 inkscape:document-units="mm" 
				 units="mm"
				 inkscape:current-layer="layer1"
				 showgrid="false"
				 inkscape:window-width="1600"
				 inkscape:window-height="837"
				 inkscape:window-x="-8"
				 inkscape:window-y="-8"
				 inkscape:window-maximized="1" />
			  <metadata
				 id="metadata3730">
				<rdf:RDF>
				  <cc:Work
					 rdf:about="">
					<dc:format>image/svg+xml</dc:format>
					<dc:type
					   rdf:resource="http://purl.org/dc/dcmitype/StillImage" />
					<dc:title></dc:title>
				  </cc:Work>
				</rdf:RDF>
			  </metadata>
			  <g id="svginfo" inkscape:label="Calque 1" inkscape:groupmode="layer" id="layer1">
				 <!-- your path goes here my dear -->
			  </g>
			</svg>
			
	<button onclick="generate_svg_file()">Generate svg file</button>
	<button onclick="generate_elements()">Test Generate SVG elements</button>
	<button onclick="tests()">Test</button>
	
	<script type="text/javascript">
		// encode the data from the svg tag into URI data, and then set those information directly to the a tag.
		// then we use the magic function click that simulate a human click on this a tag, which open the download yes/no window.
		function generate_svg_file() {
			// Use XMLSerializer to convert the DOM to a string
			var s = new XMLSerializer();
			var d = document.getElementById("svg");
			var str = s.serializeToString(d); // the svg tag with its contents 
			// and then btoa can convert that to base64
			var encodedData = "data:image/svg+xml;base64," + window.btoa(str); 
			// we set the uri content
			document.getElementById("filesvg").setAttribute("href", encodedData);
			// we set the file name downloaded
			document.getElementById("filesvg").setAttribute("download", "thismustbethebest.svg");
			// our a tag is hidden, so we use the click function as we would click on it usualy
			document.getElementById("filesvg").click();
		}		
		
		// tests ok : append path element to the svg tag
		function generate_elements() {
			var svg = document.getElementById("svg");
			var newpath = document.createElementNS(svg.namespaceURI,"path");  
			newpath.setAttribute("transform", "translate(100,10)"); 
			newpath.setAttribute("d", "m 10,10 100,0 0,50 -100,0 z");  
			svg.appendChild(newpath);
		}
	</script>
</body>

</html>